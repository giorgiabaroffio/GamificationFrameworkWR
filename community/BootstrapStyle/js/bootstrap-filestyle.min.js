/*
 * bootstrap-filestyle
 * http://dev.tudosobreweb.com.br/bootstrap-filestyle/
 *
 * Copyright (c) 2013 Markus Vinicius da Silva Lima
 * Version 1.0.3
 * Licensed under the MIT license.
 *
 * src: https://github.com/85lele/bootstrap-filestyle
 */
!function(t){"use strict";var s=function(s,e){this.options=e,this.$elementFilestyle=[],this.$element=t(s)};s.prototype={clear:function(){this.$element.val(""),this.$elementFilestyle.find(":text").val("")},destroy:function(){this.$element.removeAttr("style").removeData("filestyle").val(""),this.$elementFilestyle.remove()},icon:function(t){if(t===!0)this.options.icon||(this.options.icon=!0,this.$elementFilestyle.find("label").prepend(this.htmlIcon()));else{if(t!==!1)return this.options.icon;this.options.icon&&(this.options.icon=!1,this.$elementFilestyle.find("i").remove())}},input:function(t){if(t===!0){if(!this.options.input){this.options.input=!0,this.$elementFilestyle.prepend(this.htmlInput());var s="",e=[];void 0===this.$element[0].files?e[0]={name:this.$element[0].value}:e=this.$element[0].files;for(var n=0;n<e.length;n++)s+=e[n].name.split("\\").pop()+", ";""!==s&&this.$elementFilestyle.find(":text").val(s.replace(/\, $/g,""))}}else{if(t!==!1)return this.options.input;this.options.input&&(this.options.input=!1,this.$elementFilestyle.find(":text").remove())}},buttonText:function(t){return void 0===t?this.options.buttonText:(this.options.buttonText=t,this.$elementFilestyle.find("label span").html(this.options.buttonText),void 0)},classButton:function(t){return void 0===t?this.options.classButton:(this.options.classButton=t,this.$elementFilestyle.find("label").attr({"class":this.options.classButton}),-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label span").addClass("icon-white"):this.$elementFilestyle.find("label span").removeClass("icon-white"),void 0)},classIcon:function(t){return void 0===t?this.options.classIcon:(this.options.classIcon=t,-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)?this.$elementFilestyle.find("label").find("span").attr({"class":"icon-white "+this.options.classIcon}):this.$elementFilestyle.find("label").find("span").attr({"class":this.options.classIcon}),void 0)},classInput:function(t){return void 0===t?this.options.classInput:(this.options.classInput=t,this.$elementFilestyle.find(":text").addClass(this.options.classInput),void 0)},htmlIcon:function(){if(this.options.icon){var t="";return-1!==this.options.classButton.search(/btn-inverse|btn-primary|btn-danger|btn-warning|btn-success/i)&&(t=" icon-white "),'<span class="'+t+this.options.classIcon+'"></span> '}return""},htmlInput:function(){return this.options.input?'<input type="text" class="'+this.options.classInput+'" disabled> ':""},constructor:function(){var s=this,e="",n=this.$element.attr("id"),i=[];""!==n&&n||(n="filestyle-"+t(".bootstrap-filestyle").length,this.$element.attr({id:n}));var l=""!=this.options.classInputContainerClass?'<div class="'+this.options.classInputContainerClass+'">':"",o=""!=l?"</div>":"",a=""!=this.options.classButtonContainerClass?'<div class="'+this.options.classButtonContainerClass+'">':"",c=""!=a?"</div>":"";e=this.options.buttonBefore?a+'<label for="'+n+'" class="'+this.options.classButton+'">'+this.htmlIcon()+" "+this.options.buttonText+"</label>"+c+l+this.htmlInput()+o:l+this.htmlInput()+o+a+'<label for="'+n+'" class="'+this.options.classButton+'">'+this.htmlIcon()+" "+this.options.buttonText+"</label>"+c,this.$elementFilestyle=t('<div class="'+this.options.containerClass+' bootstrap-filestyle">'+e+"</div>");var r=this.$elementFilestyle.find("label"),h=r.parent();h.attr("tabindex","0").keypress(function(t){(13===t.keyCode||32===t.charCode)&&r.click()}),this.$element.css({position:"absolute",clip:"rect(0,0,0,0)"}).attr("tabindex","-1").after(this.$elementFilestyle),this.$element.change(function(){var t="";void 0===this.files?i[0]={name:this.value}:i=this.files;for(var e=0;e<i.length;e++)t+=i[e].name.split("\\").pop()+", ";""!==t?s.$elementFilestyle.find(":text").val(t.replace(/\, $/g,"")):s.$elementFilestyle.find(":text").val("")}),window.navigator.userAgent.search(/firefox/i)>-1&&this.$elementFilestyle.find("label").click(function(){return s.$element.click(),!1})}};var e=t.fn.filestyle;t.fn.filestyle=function(e,n){var i="",l=this.each(function(){if("file"===t(this).attr("type")){var l=t(this),o=l.data("filestyle"),a=t.extend({},t.fn.filestyle.defaults,e,"object"==typeof e&&e);o||(l.data("filestyle",o=new s(this,a)),o.constructor()),"string"==typeof e&&(i=o[e](n))}});return void 0!==typeof i?i:l},t.fn.filestyle.defaults={buttonText:"Choose file",input:!0,icon:!0,buttonBefore:!1,containerClass:"input-group",classButtonContainerClass:"input-group-btn",classButton:"btn btn-default",classInputContainerClass:"",classInput:"form-control",classIcon:"glyphicon glyphicon-folder-open"},t.fn.filestyle.noConflict=function(){return t.fn.filestyle=e,this},t(".filestyle").each(function(){var s=t(this),e={buttonText:s.attr("data-buttonText"),input:"false"===s.attr("data-input")?!1:!0,icon:"false"===s.attr("data-icon")?!1:!0,classButton:s.attr("data-classButton"),classInput:s.attr("data-classInput"),classIcon:s.attr("data-classIcon")};s.filestyle(e)})}(window.jQuery);